{"version":3,"file":"pages/user/new.js","sources":["webpack:///./api/request.js","webpack:///./pages/user/new.vue?5579","webpack:///./api/gist.js","webpack:///./pages/user/new.vue","webpack:///./pages/user/new.vue?a7b3","webpack:///./pages/user/new.vue?bcf0"],"sourcesContent":["import axios from 'axios'\r\nimport Vue from 'vue'\r\n\r\n\r\nconst service = axios.create({\r\n    baseURL: \"https://api.github.com\",\r\n    timeout: 15000\r\n})\r\n\r\n// service.interceptors.request.use(\r\n//     config => {\r\n//         return config\r\n//     },\r\n//     error => {}\r\n// )\r\n\r\n\r\nservice.interceptors.response.use(\r\n    response => {\r\n        let responseJson = response.data\r\n        return response\r\n    },\r\n    error => {\r\n        let message\r\n        switch (error.response.status) {\r\n            case 401:\r\n                message = \"Token错误\"\r\n                break\r\n            default:\r\n                message = error.response.data.message\r\n                break\r\n        }\r\n        Vue.prototype.$message({\r\n            message: message,\r\n            type: 'error'\r\n        })\r\n        return Promise.reject('error')\r\n    }\r\n)\r\n\r\nexport default service\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticStyle:{\"min-height\":\"600px\"}},[(_vm.blog.id)?_c('el-card',{staticStyle:{\"min-height\":\"400px\"},attrs:{\"shadow\":\"never\"}},[_c('div',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(_vm._s(_vm.blog.title))])]),_vm._v(\" \"),_c('div',{staticStyle:{\"font-size\":\"0.9rem\",\"line-height\":\"1.5\",\"color\":\"#606c71\"}},[_vm._v(\"\\n            发布 \"+_vm._s(_vm.blog.createTime)+\"\\n            \"),_c('br'),_vm._v(\" 更新 \"+_vm._s(_vm.blog.updateTime)+\"\\n        \")]),_vm._v(\" \"),_c('div',{staticStyle:{\"font-size\":\"1.1rem\",\"line-height\":\"1.5\",\"color\":\"#303133\",\"border-bottom\":\"1px solid #E4E7ED\",\"padding\":\"5px 0px 5px 0px\"}},[_c('pre',{staticStyle:{\"font-family\":\"'微软雅黑'\"}},[_vm._v(_vm._s(_vm.blog.description))])]),_vm._v(\" \"),_c('div',{staticClass:\"markdown-body\",staticStyle:{\"padding-top\":\"20px\"},domProps:{\"innerHTML\":_vm._s(_vm.blog.content)}})]):_vm._e(),_vm._ssrNode(\" \"),(!_vm.blog.id)?_c('el-card',{staticStyle:{\"margin-bottom\":\"20px\",\"padding\":\"20px 0px 20px 0px\",\"text-align\":\"center\"},attrs:{\"shadow\":\"never\"}},[_c('font',{staticStyle:{\"font-size\":\"30px\",\"color\":\"#dddddd\"}},[_c('b',[_vm._v(\"没有更新 ╮(๑•́ ₃•̀๑)╭\")])])],1):_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import request from './request'\r\n\r\nexport default {\r\n    list: function (query) {\r\n        let githubUsername = 'weblw'\r\n        return request({\r\n            url: `/users/${githubUsername}/gists?page=${query.page}&per_page=${query.pageSize}`\r\n        })\r\n    },\r\n    single: function (id) {\r\n      return request({\r\n          url: '/gists/' + id\r\n      })\r\n    }\r\n}","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport GistApi from '../../api/gist'\nimport mavonEditor from 'mavon-editor'\nexport default {\n    data() {\n        return {\n            query: {\n                page: 1,\n                pageSize: 1\n            },\n            loading: false,\n            blog: {\n                id: \"\",\n                title: \"\",\n                content: \"\",\n                description: \"\",\n                createTime: \"\",\n                updateTime: \"\"\n            }\n        }\n    },\n    mounted() {\n        this.loading = true\n        GistApi.list(this.query).then((response) => {\n            let result = response.data\n            if (!result || result.length == 0) {\n                this.loading = false\n                return\n            }\n            for (let key in result[0].files) {\n                this.blog.id = result[0]['id']\n                break\n            }\n            GistApi.single(this.blog.id).then((response) => {\n                let result = response.data\n                for (let key in result.files) {\n                    this.blog['title'] = key\n                    this.blog['content'] = this.markdown(result.files[key]['content'])\n                    this.blog['description'] = result['description']\n                    this.blog['createTime'] = this.utcToLocal(result['created_at'])\n                    this.blog['updateTime'] = this.utcToLocal(result['updated_at'])\n                    break\n                }\n            }).then(() => this.loading = false)\n        })\n    },\n    methods: {\n      utcToLocal(time) {\n          let formatNum = (num)=>{\n              return num>=10?num:('0'+num)\n          }\n          let arr = time.split(/[^0-9]/)\n          let worldDate = new Date(arr[0], arr[1] - 1, arr[2], arr[3], arr[4], arr[5])\n          let localDate = new Date(worldDate.getTime() + 8 * 60 * 60 * 1000)\n          return formatNum(localDate.getFullYear()) + \"-\"\n              + formatNum((localDate.getMonth() + 1)) + \"-\" \n              + formatNum(localDate.getDate()) + \" \" \n              + formatNum(localDate.getHours()) + \":\" \n              + formatNum(localDate.getMinutes()) + \":\" \n              + formatNum(localDate.getSeconds())\n      },\n      markdown (value) {\n          return mavonEditor.markdownIt.render(value)\n      }\n    }\n}\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./new.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./new.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./new.vue?vue&type=template&id=addc57a4&\"\nimport script from \"./new.vue?vue&type=script&lang=js&\"\nexport * from \"./new.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  \"051a7e5a\"\n  \n)\n\nexport default component.exports"],"mappings":";;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAGA;AACA;AACA;AAFA;AAMA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AAEA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AANA;AACA;AAOA;AACA;AACA;AAFA;AAIA;AACA;AAGA;;;;;;;;;;;;ACxCA;AACA;AACA;;;;;;;;ACFA;AAEA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AADA;AAGA;AAXA;;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AANA;AAeA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAMA;AACA;AAAA;AACA;AACA;AACA;AAlBA;AA3CA;;ACzBA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}